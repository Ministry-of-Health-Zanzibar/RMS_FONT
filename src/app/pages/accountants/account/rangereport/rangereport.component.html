<div class="p-10 space-y-8" *ngIf="permission.parmissionMatched(['View Report'])">
  <div class="flex items-center justify-between">
    <h1 class="text-lg font-bold">View Report</h1>
    <!-- Export Buttons -->
    <div class="flex gap-4">
      <button mat-raised-button color="accent" (click)="exportExcel()">
        <mat-icon>table_chart</mat-icon>
        Export Excel
      </button>
      <button mat-raised-button color="warn" (click)="exportPDF()">
        <mat-icon>picture_as_pdf</mat-icon>
        Export PDF
      </button>
    </div>
  </div>

  <div class="search-container bg-white p-4 rounded">
    <form [formGroup]="reportForm" class="search-form">
      <div class="form-fields">
        <input type="date" formControlName="start_date" class="border p-2 rounded w-1/3">
        <input type="date" formControlName="end_date" class="border p-2 rounded w-1/3">
      </div>

      <button mat-flat-button style="width: 150px; height: 50px;" (click)="fetchReports()">
        <mat-icon class="font-icon">search</mat-icon> Search
      </button>

    </form>
  </div>

  <div class="mt-4 flex items-center justify-between">
    <div class="flex items-center gap-1.5">
      <div class="size-9 rounded-full border bg-surface flex items-center justify-center" (click)="renew()" matTooltip="Refresh">
        <mat-icon class="font-icon visibilityData">refresh</mat-icon>
      </div>
      <input type="text" placeholder="Search..." class="border-b h-10 w-96 text-sm bg-transparent dark:border-b-inverse outline-0 focus-within:border-neutral-950" matInput (keyup)="applyFilter($event)" #input>
    </div>
  </div>

  <div class="border dark:border-inverse rounded-lg overflow-hidden mt-4">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
      <!-- No Column -->
      <ng-container matColumnDef="no">
        <th mat-header-cell *matHeaderCellDef>No</th>
        <td mat-cell *matCellDef="let element; let i = index">{{ i + 1 }}</td>
      </ng-container>

      <!-- Full Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Full Name</th>
        <td mat-cell *matCellDef="let element">{{ element.payee_name }}</td>
      </ng-container>
      <!-- <ng-container matColumnDef="fullname">
        <th mat-header-cell *matHeaderCellDef>Full Name</th>
        <td mat-cell *matCellDef="let element">{{ element.first_name + ' ' + element.middle_name+ ' '+ element.last_name}}</td>
      </ng-container> -->

      <!-- Phone Column -->
      <ng-container matColumnDef="amount">
        <th mat-header-cell *matHeaderCellDef>Ammount</th>
        <td mat-cell *matCellDef="let element">{{ element.amount }}</td>
      </ng-container>

      <ng-container matColumnDef="tin_number">
        <th mat-header-cell *matHeaderCellDef>Tin Number</th>
        <td mat-cell *matCellDef="let element">{{ element.tin_number }}</td>
      </ng-container>

      <ng-container matColumnDef="source_name">
        <th mat-header-cell *matHeaderCellDef>Source Name</th>
        <td mat-cell *matCellDef="let element">{{ element.source_name }}</td>
      </ng-container>

      <ng-container matColumnDef="source_type_name">
        <th mat-header-cell *matHeaderCellDef>Source Type</th>
        <td mat-cell *matCellDef="let element">{{ element.source_type_name }}</td>
      </ng-container>

      <ng-container matColumnDef="category_name">
        <th mat-header-cell *matHeaderCellDef>Category Name</th>
        <td mat-cell *matCellDef="let element">{{ element.category_name }}</td>
      </ng-container>

      <ng-container matColumnDef="document_type_name">
        <th mat-header-cell *matHeaderCellDef>Document Type</th>
        <td mat-cell *matCellDef="let element">{{ element.document_type_name }}</td>
      </ng-container>

      <!-- Complaint Column -->
      <!-- <ng-container matColumnDef="complain_body">
        <th mat-header-cell *matHeaderCellDef>Complaint</th>
        <td mat-cell *matCellDef="let element">
          {{ element.complain_body.split(' ').slice(0, 5).join(' ') }}{{ element?.complain_body.split(' ').length > 5 ? '...' : '' }}
        </td>
      </ng-container> -->





      <ng-container matColumnDef="action" >
        <th mat-header-cell *matHeaderCellDef class="text-neutral-500 dark:text-neutral-400"> Action </th>
        <td mat-cell *matCellDef="let element">

          <emr-segmented theme="simple" class="-mx-2">


            </emr-segmented>
            </td>
      </ng-container>




      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell tablefoter" colspan="10">No data matching the filter "{{input.value}}"</td>
      </tr>
    </table>
    <mat-paginator [pageSizeOptions]="[10, 20, 100]" showFirstLastButtons></mat-paginator>
  </div>
</div>


