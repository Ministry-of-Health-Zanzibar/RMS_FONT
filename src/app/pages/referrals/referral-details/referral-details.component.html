<div *ngIf="referral">
  <h2 class="text-4xl font-bold text-center text-primary-700 mb-10 tracking-tight">
    Referral Details
  </h2>

  <div class="overflow-x-auto">
    <table class="table-auto w-full border-collapse border border-gray-300">
      <thead>
        <tr class="bg-gray-100">
          <th class="border border-gray-300 px-4 py-2 text-left text-sm font-semibold text-gray-700">Field</th>
          <th class="border border-gray-300 px-4 py-2 text-left text-sm font-semibold text-gray-700">Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="border border-gray-300 px-4 py-2 font-medium text-gray-600">Patient Name</td>
          <td class="border border-gray-300 px-4 py-2 bg-gray-50 rounded-xl">{{ referral.patient_name }}</td>
        </tr>
        <tr>
          <td class="border border-gray-300 px-4 py-2 font-medium text-gray-600">Hospital Name</td>
          <td class="border border-gray-300 px-4 py-2 bg-gray-50 rounded-xl">{{ referral.hospital_name }}</td>
        </tr>
        <tr>
          <td class="border border-gray-300 px-4 py-2 font-medium text-gray-600">Referral Type</td>
          <td class="border border-gray-300 px-4 py-2 bg-gray-50 rounded-xl">{{ referral.referral_type_name }}</td>
        </tr>
        <tr>
          <td class="border border-gray-300 px-4 py-2 font-medium text-gray-600">Reason</td>
          <td class="border border-gray-300 px-4 py-2 bg-gray-50 rounded-xl">{{ referral.referral_reason_name }}</td>
        </tr>
        <tr>
          <td class="border border-gray-300 px-4 py-2 font-medium text-gray-600">Status</td>
          <td class="border border-gray-300 px-4 py-2">
            <span
              class="inline-flex items-center px-2.5 py-0.5 text-xs font-semibold rounded-full text-white"
              [ngClass]="{
                'bg-green-500': referral.status === 'Confirmed',
                'bg-red-500': referral.status === 'Cancelled',
                'bg-yellow-500': referral.status === 'Pending'
              }"
            >
              {{ referral.status }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="flex justify-center mt-12 space-x-6">
    <button
      type="button"
      class="bg-primary-600 hover:bg-primary-700 transition-all duration-200 text-white px-8 py-3 rounded-xl text-lg font-semibold shadow-lg"
      (click)="updateStatusPopup()"
      [disabled]="referral.status !== 'Pending'"
    >
      Confirm
    </button>
    <!-- Optional Deny button could be added here -->
  </div>
</div>

<!-- Loading State -->
<div *ngIf="!referral" class="flex flex-col justify-center items-center h-64">
  <div class="w-16 h-16 border-4 border-primary-500 border-dashed rounded-full animate-spin mb-4"></div>
  <p class="text-gray-600 text-lg font-medium">Loading Referral data...</p>
</div>
