<div class="p-10 space-y-8">
  <div class="flex items-center justify-between">
    <h1 class="text-lg font-bold">Bill Items</h1>
  </div>

  <div class="relative h-full rounded-lg border group dark:border-inverse p-4">
    <div class="font-semibold pb-2.5 border-b-2 border-b-secondary-400">
      View Bill Items
    </div>

    <div class="mt-4 flex items-center justify-between">
      <div class="flex items-center gap-1.5">
        <!-- <button mat-icon-button (click)="getBillItemsByBillId(bill_id!)" matTooltip="Refresh">
          <mat-icon>refresh</mat-icon>
        </button> -->
        <emr-v-divider></emr-v-divider>

        <input
          type="text"
          placeholder="Search..."
          class="border-b h-10 w-96 text-sm bg-transparent dark:border-b-inverse outline-0 focus-within:border-neutral-950"
          matInput
          (keyup)="applyFilter($event)"
        />
      </div>

      <div class="mb-4 text-right">
        <button
          mat-flat-button
          color="primary"
          (click)="addBillIterm(+bill_id!)"
        >
          <mat-icon>add</mat-icon>
          Add Bill Item
        </button>
      </div>
    </div>

    <div class="border dark:border-inverse rounded-lg overflow-hidden mt-4">
      <table mat-table [dataSource]="dataSource" class="not-prose w-full">
        <!-- Bill Item ID -->
        <ng-container matColumnDef="bill_item_id">
          <th mat-header-cell *matHeaderCellDef>No.</th>
          <td mat-cell *matCellDef="let element; let i = index">{{ i + 1 }}</td>
        </ng-container>

        <!-- Description -->
        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef>Description</th>
          <td mat-cell *matCellDef="let element">{{ element.description }}</td>
        </ng-container>

        <!-- Amount -->
        <ng-container matColumnDef="amount">
          <th mat-header-cell *matHeaderCellDef>Amount</th>
          <td mat-cell *matCellDef="let element">
            {{ element.amount | currency : "TZS " }}
          </td>
        </ng-container>

        <!-- Actions -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Action</th>
          <td mat-cell *matCellDef="let element">
            <span
              class="size-9 rounded-full border bg-surface flex items-center justify-center cursor-pointer"
              (click)="displayMoreData(element)"
              matTooltip="View"
            >
              <mat-icon class="font-icon">visibility</mat-icon>
            </span>
          </td>
        </ng-container>

        <!-- Header & Row -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

        <!-- No Data -->
        <tr *ngIf="dataSource.data.length === 0">
          <td [attr.colspan]="displayedColumns.length" class="text-center p-4">
            No bills available.
          </td>
        </tr>
      </table>

      <mat-paginator
        [pageSizeOptions]="[10, 20]"
        showFirstLastButtons
      ></mat-paginator>
    </div>
  </div>

  <div
    *ngIf="loading"
    class="fixed inset-0 flex items-center justify-center bg-white bg-opacity-70 z-50"
  >
    <div
      class="w-16 h-16 border-4 border-blue-500 border-dashed rounded-full animate-spin"
    ></div>
  </div>
</div>
